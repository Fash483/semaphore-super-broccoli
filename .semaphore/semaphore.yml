version: v1.0

name: Download Torrent and Upload to PixelDrain

agent:
  machine:
    type: e1-standard-2
    os_image: ubuntu2004

blocks:
  - name: Download & Upload
    task:
      env_vars:
        - name: PIXELDRAIN_API_KEY
          value: 5f45f184-64bb-4eaa-be19-4a5f0459db49   # üîê Replace with your actual key
        - name: TORRENT_MAGNET
          value: "magnet:?xt=urn:btih:..."              # üîó Replace with your magnet link
      jobs:
        - name: Download and Upload Files
          commands:
            - checkout
            - echo "üì¶ Installing webtorrent-cli..."
            - sudo apt update
            - sudo apt install -y nodejs npm
            - npm install webtorrent-cli

            - echo "üì• Downloading torrent..."
            - mkdir downloads
            - npx webtorrent "magnet:?xt=urn:btih:8be57821c162e501d9cf7f66a5ab21492487fe06&dn=Arthur%201996%20Seasons%2021%20to%2025%20Complete%20%2B%20Specials%20TVRip%20x264%20%5Bi_c%5D&tr=udp%3A%2F%2Ftracker.opentrackr.org%3A1337%2Fannounce&tr=udp%3A%2F%2Fopen.demonii.com%3A1337%2Fannounce&tr=udp%3A%2F%2Fopen.stealth.si%3A80%2Fannounce&tr=udp%3A%2F%2Ftracker.torrent.eu.org%3A451%2Fannounce&tr=udp%3A%2F%2Fexplodie.org%3A6969%2Fannounce&tr=udp%3A%2F%2Fexodus.desync.com%3A6969%2Fannounce&tr=udp%3A%2F%2Ftracker.theoks.net%3A6969%2Fannounce&tr=udp%3A%2F%2Ftracker-udp.gbitt.info%3A80%2Fannounce&tr=udp%3A%2F%2Fwepzone.net%3A6969%2Fannounce&tr=udp%3A%2F%2Fttk2.nbaonlineservice.com%3A6969%2Fannounce&tr=udp%3A%2F%2Ftracker2.dler.org%3A80%2Fannounce&tr=udp%3A%2F%2Ftracker.tryhackx.org%3A6969%2Fannounce&tr=udp%3A%2F%2Ftracker.therarbg.to%3A6969%2Fannounce&tr=udp%3A%2F%2Ftracker.srv00.com%3A6969%2Fannounce&tr=udp%3A%2F%2Ftracker.ololosh.space%3A6969%2Fannounce&tr=udp%3A%2F%2Ftracker.dump.cl%3A6969%2Fannounce&tr=udp%3A%2F%2Ftracker.dler.org%3A6969%2Fannounce&tr=udp%3A%2F%2Ftracker.darkness.services%3A6969%2Fannounce&tr=udp%3A%2F%2Ftracker.bittor.pw%3A1337%2Fannounce&tr=udp%3A%2F%2Ftr4ck3r.duckdns.org%3A6969%2Fannounce&tr=https%3A%2F%2Ftracker.bt4g.com%3A443%2Fannounce" --out downloads

            - echo "üì§ Uploading files to PixelDrain..."
            - |
              find downloads -type f | while read file; do
                echo "Uploading $file..."
                response=$(curl -s -T "$file" -u :87c2dcc7-5488-46ac-974b-491b939c284d https://pixeldrain.com/api/file/)
                id=$(echo "$response" | grep -o '"id":"[^"]*"' | cut -d':' -f2 | tr -d '"')
                echo "‚úÖ $file uploaded: https://pixeldrain.com/u/$id"
              done

